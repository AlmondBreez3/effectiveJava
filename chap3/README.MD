# 3w장 모든 객체의 공통 메서드

> item 10. equals는 일반 규약을 재정의 하여라

- equals 메소드를 재정의하지 않은 클래스의 인스턴스는 오직 자기 자신과만 같다
- 재정의하지 않을 상황
  1. 각 인스턴스가 본질적으로 고유하다. 주로 값을 표현하는 것이 아닌 동작하는 것을 표현하는 클래스가 여기에 해당
  2. 인스턴스의 논리적 동치성을 검사할 일이 없다. 예를 들어 regex.Pattern에서 equals를 재정의해서 정규표현식이 같은지 재정의하지는 않는다
  3. 상위 클래스에서 재정의한 equals가 하위 클래스에서도 같은 상황이다
  4. VO여도 값이 같은 인스턴스가 2개 이상 안 만들어진다는 보장이 있다면 재정의안해도 된다
     - 인스턴스 통제 클래스(singleton), Enum 등이 여기에 속한다. 어차피 논리적으로 같은 인스턴스가 2개 이상 만들어지지 않는다

- 재정의해야 하는 상황
    1. equals 메소드는 메모리 주소를 기반으로 물리적으로 같은가? 가 아니라 논리적 동치성을 비교해야 할 때 재정의하면 좋다. 객체 내 값이 같은지 비교할 때 재정의해야한다
  2. Map의 키, set의 원소등으로 사용하려면 재정의해야한다

- 동치관계란?
    1. x,y,z는 null이 아니라고 전제한다
  2. 반사성: 객체는 자기 자신과 같다. x=x
  3. 대칭성:두객체는 서로에 대한 동치 여부에 똑같은 결과를 낸다 x=y, y=x
  4. 추이성: x=y이고 y=z이면 x=z도 true이다. 애초에 구체 클래스를 확장해 새로운 값을 추가하면서 equals 규약을 만족시킬 방법은 존재하지 않는다
    상속 대신 컴포지션으로 우회하자 
  5. 일관성: x=y를 반복 호출하면 항상 true를 반환하거나 항상 false를 반환한다
  
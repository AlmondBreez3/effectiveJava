# 6ì¥ ì—´ê±°íƒ€ì…ê³¼ ì• ë„ˆí…Œì´ì…˜
í´ë˜ìŠ¤ì˜ ì¼ì¢…ì¸ ì—´ê±°íƒ€ì…(Enum), ì¸í„°í˜ì´ìŠ¤ì˜ ì¼ì¢…ì¸ ì• ë„ˆí…Œì´ì…˜(Annotation)

> item 34 int ìƒìˆ˜ ëŒ€ì‹  ì—´ê±° íƒ€ì…ì„ ì‚¬ìš©í•˜ë¼

ì•ˆì¢‹ì€ ì •ìˆ˜ ì—´ê±° íŒ¨í„´
```java
public static final int APPLE_FUJI = 0;
public static final int APPLE_PIPPIN = 1;
public static final int APPLE_GRANNY_SMITH = 2;

public static final int ORANGE_NAVEL = 0;
public static final int ORANGE_TEMPLE = 1;
public static final int ORANGE_BLOOD = 2;

```

- ì •ìˆ˜ ì—´ê±° íŒ¨í„´ì„ ì‚¬ìš©í•œ í”„ë¡œê·¸ë¨ì€ ê¹¨ì§€ê¸° ì‰½ë‹¤. 

```java
public enum Apple {FUJI, PIPPIN, GRANNY_SMITH}
public enum Orange {NAVEL, TEMPLE, BLOOD}
```

ì´ë ‡ê²Œ ì„ ì–¸í•˜ë©´ ìƒìˆ˜ í•˜ë‚˜ë‹¹ ìì‹ ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ì”© ë§Œë“¤ì–´ public static fieldë¡œ ê³µê°œí•œë‹¤. ì—´ê±° íƒ€ì…ì€
ë°–ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìƒì„±ìë¥¼ ì œê³µí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì‚¬ì‹¤ìƒ finalì´ë‹¤.

- ì—´ê±° íƒ€ì…ì˜ toString ë©”ì„œë“œëŠ” ì¶œë ¥í•˜ê¸°ì— ì í•©í•œ ë¬¸ìì—´ì„ ë‚´ì–´ì¤€ë‹¤. 

## ì—´ê±° íƒ€ì…ì— ì„ì˜ì˜ ë©”ì„œë“œë‚˜ í•„ë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê³  ì„ì˜ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê²Œ í•  ìˆ˜ ë„ ìˆë‹¤
ì˜ˆì‹œ ì½”ë“œ
```java
public enum Planet {
    MERCURY(3.302e+23, 2.439e6),
    VENUS (4.869e+24, 6.052e6),
    EARTH (5.975e+24, 6.378e6),
    MARS (6.419e+23, 3.393e6),
    JUPITER(1.899e+27, 7.149e7),
    SATURN(5.685e+26,6.027e7),
    URANUS(8.683e+25,2.556e7),
    NEPTUNE(1.024e+26, 2.477e7)
    
    private final double mass;
    private final double radius;
    private final double surfaceGravity;
    
    private static final double G = 6.67300E-11;
    
    Planet(double mass, double radius) {
        this.mass = mass;
        this.radius = radius;
        surfaceGravity = G * mass / (radius * radius);
    }
    
    public double mass() {return mass;}
    public double radius() {return radius;}
    public double surfaceGravity() {return surfaceGravity;}
    
    public double surfaceWeight(double mass ) {
        return mass* surfaceGravity;
    }
    
}
```
ì—´ê±°íƒ€ì…ì€ ê·¼ë³¸ì ìœ¼ë¡œ ë¶Šë³€ì´ë¼ ëª¨ë“  í•„ë“œëŠ” finalì´ì–´ì•¼ í•œë‹¤. í•„ë“œë¥¼ publicìœ¼ë¡œ ì„ ì–¸í•´ë„ ë˜ì§€ë§Œ, privateìœ¼ë¡œ ë‘ê³ 
ë³„ë„ì˜ public ì ‘ê·¼ì ë©”ì„œë“œë¥¼ ë‘ëŠ” ê²Œ ë‚«ë‹¤

# ì´í™í‹°ë¸Œìë°”6ì¥

> Item 34 int ìƒìˆ˜ ëŒ€ì‹  ì—´ê±° íƒ€ì…ì„ ì‚¬ìš©í•´ë¼
>

### ì •ìˆ˜ ì—´ê±° íŒ¨í„´ - ìƒë‹¹íˆ ì·¨ì•½í•˜ë‹¤

```java
public static final int APPLE_FUJI = 0;
public static final int APPLE_PIPPIN = 1;
public static final int APPLE_GRANNY_SMITH = 2;

public static final int ORANGE_NAVEL = 0;
public static final int ORANGE_TEMPLE = 1;
public static final int ORANGE_BLOOD = 2;
```

ë‹¨ì ì´ ë§ë‹¤. íƒ€ì… ì•ˆì „ì„ ë³´ì¥í•  ë°©ë²•ì´ ì—†ê³  í‘œí˜„ë ¥ë„ ì¢‹ì§€ ì•Šë‹¤

### ê°€ì¥ ë‹¨ìˆœí•œ ì—´ê±° íƒ€ì…

```java
public enum Apple {FUJI, PIPPIN, GRANNY_SMITH}
public enum Orange {NAVEL, TEMPLE, BLOOD}
```

ì—´ê±° íƒ€ì… ìì²´ê°€ í´ë˜ìŠ¤ì´ê³  ìƒìˆ˜ í•˜ë‚˜ë‹¹ ìì‹ ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ì”© ë§Œë“¤ì–´ public static final í•„ë“œë¡œ ê³µê°œí•œë‹¤.

ì—´ê±° íƒ€ì…ì€ ë°–ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìƒì„±ìë¥¼ ì œê³µí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì‚¬ì‹¤ìƒ finalì´ë‹¤

`ì—´ê±° íƒ€ì…ì˜ toString ë©”ì„œë“œëŠ” ì¶œë ¥í•˜ê¸°ì— ì í•©í•œ ë¬¸ìì—´ì„ ë‚´ì–´ì¤€ë‹¤.`

ğŸ’¡Appleê³¼ Orangeë¥¼ ì˜ˆë¡œ ë“¤ë©´, ê³¼ì¼ì˜ ìƒ‰ì„ ì•Œë ¤ì£¼ê±°ë‚˜ ê³¼ì¼ ì´ë¯¸ì§€ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ì„ ë•Œ? í–‰ì„±ì— ëŒ€í•œ ì—´ê±° íƒ€ì…ì„ ì„¤ëª…í•˜ë©´ì„œ Enum í´ë˜ìŠ¤ê°€ ê³ ì°¨ì›ì˜ ì¶”ìƒ ê°œë… í•˜ë‚˜ë¥¼ ì™„ë²½íˆ í‘œí˜„í•´ë‚¼ ìˆ˜ë„ ìˆëŠ” ì˜ˆë¥¼ ë“¤ì–´ë³´ê² ë‹¤

```java
public enum Planet {
    MERCURY(3.302e+23, 2.439e6),
    VENUS (4.869e+24, 6.052e6),
    EARTH (5.975e+24, 6.378e6),
    MARS (6.419e+23, 3.393e6),
    JUPITER(1.899e+27, 7.149e7),
    SATURN(5.685e+26,6.027e7),
    URANUS(8.683e+25,2.556e7),
    NEPTUNE(1.024e+26, 2.477e7)
    
    private final double mass;
    private final double radius;
    private final double surfaceGravity;
    
    private static final double G = 6.67300E-11;
    
    Planet(double mass, double radius) {
        this.mass = mass;
        this.radius = radius;
        surfaceGravity = G * mass / (radius * radius);
    }
    
    public double mass() {return mass;}
    public double radius() {return radius;}
    public double surfaceGravity() {return surfaceGravity;}
    
    public double surfaceWeight(double mass ) {
        return mass* surfaceGravity;
    }
    
}
```

ì´ Enumí´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì–´ë–¤ ê°ì²´ì˜ ì§€êµ¬ì—ì„œì˜ë¬´ê²Œë¥¼ ì…ë ¥ë°›ì•„ ì—¬ëŸ í–‰ì„±ì—ì„œì˜ ë¬´ê²Œë¥¼ ì¶œë ¥í•˜ëŠ” ì¼ì€ ë‹¤ìŒì²˜ëŸ¼ ì§§ì€ ì½”ë“œë¡œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤

```java
public class WeightTable {
	public static void main(String[] args) {
		double earthWeight = Double.parseDouble(args[0]);
		double mass = earthWeight / Planet.EARTH.surfaceGravity();
		for (Planet p : Planet.values())
				System.out.printg("%sì—ì„œì˜ ë¬´ê²ŒëŠ” %fì´ë‹¤.%n", p, p.surfaveWeight(mass))
	}
}
```

- ê¸°ëŠ¥ì„ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œí•´ì•¼í•  í•©ë‹¹í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ private í˜¹ì€ package-privateìœ¼ë¡œ ì„ ì–¸í•˜ë¼

### ì—´ê±° íƒ€ì… ìƒìˆ˜ë§ˆë‹¤ ë™ì‘ì´ ë‹¬ë¼ì§€ëŠ” ë©”ì„œë“œ

```java
enum Operation {
    PLUS {
        @Override
        public double apply(double x, double y) {
            return x+y;
        }
    },
    MINUS {
        @Override
        public double apply(double x, double y) {
            return x-y;
        }
    },
    TIMES {
        @Override
        public double apply(double x, double y) {
            return x*y;
        }
    },
    DIVIDE {
        @Override
        public double apply(double x, double y) {
            return x/y;
        }
    };

    public abstract double apply(double x, double y);
}

@Test
public void operationApplyTest() {
    double x = 10;
    double y = 15;

    for (Operation value : Operation.values()) {
        System.out.printf("%f %s %f = %f%n", x, value, y, value.apply(x, y));
    }
}
ì¶œì²˜: https://jake-seo-dev.tistory.com/54 [ì œì´í¬ì„œ ìœ„í‚¤ ë¸”ë¡œê·¸:í‹°ìŠ¤í† ë¦¬]
```

### ìƒìˆ˜ë³„ í´ë˜ìŠ¤ ëª¸ì²´ì™€ ë°ì´í„°ë¥¼ ì‚¬ìš©í•œ ì—´ê±° íƒ€ì…

```java
enum Operation {
    PLUS ("+") {
        @Override
        public double apply(double x, double y) {
            return x+y;
        }
    },
    MINUS ("-") {
        @Override
        public double apply(double x, double y) {
            return x-y;
        }
    },
    TIMES ("*") {
        @Override
        public double apply(double x, double y) {
            return x*y;
        }
    },
    DIVIDE ("/") {
        @Override
        public double apply(double x, double y) {
            return x/y;
        }
    };

    private final String symbol;

    Operation(String symbol) {
        this.symbol = symbol;
    }

    public abstract double apply(double x, double y);

    @Override
    public String toString() {
        return symbol;
    }
}

@Test
public void operationApplyTest() {
    double x = 10;
    double y = 15;

    for (Operation value : Operation.values()) {
        System.out.printf("%f %s %f = %f%n", x, value, y, value.apply(x, y));
    }
}
ì¶œì²˜: https://jake-seo-dev.tistory.com/54 [ì œì´í¬ì„œ ìœ„í‚¤ ë¸”ë¡œê·¸:í‹°ìŠ¤í† ë¦¬]
```

- toString()ì„ ì¬ì •ì˜í•˜ì—¬ symbol í•„ë“œë¥¼ ë°˜í™˜í•˜ê²Œ í•˜ì˜€ë‹¤

### Enumì—ì„œ toString() êµ¬í˜„ ì´í›„ì— fromStringë©”ì„œë“œ êµ¬í˜„í•˜ê¸°

```java
enum Operation {
    PLUS ("+") {
        @Override
        public double apply(double x, double y) {
            return x+y;
        }
    },
    MINUS ("-") {
        @Override
        public double apply(double x, double y) {
            return x-y;
        }
    },
    TIMES ("*") {
        @Override
        public double apply(double x, double y) {
            return x*y;
        }
    },
    DIVIDE ("/") {
        @Override
        public double apply(double x, double y) {
            return x/y;
        }
    };

    private final String symbol;

    Operation(String symbol) {
        this.symbol = symbol;
    }

    public abstract double apply(double x, double y);

    @Override
    public String toString() {
        return symbol;
    }

    public static final Map<String, Operation> stringToEnum = Stream.of(values()).collect(Collectors.toMap(Object::toString, e -> e));

    public static Optional<Operation> fromString(String symbol) {
        return Optional.ofNullable(stringToEnum.get(symbol));
    }
}
```

### ê°’ì— ë”°ë¼ ë¶„ê¸°í•˜ì—¬ ì½”ë“œë¥¼ ê³µìœ í•˜ëŠ” ì—´ê±° íƒ€ì…

```java
enum PayrollDay {
    MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY;

    private static final int MINS_PER_SHIFT = 8 * 60;

    int pay(int minutesWorked, int payRate) {
        int basePay = minutesWorked * payRate;
        int overtimePay;

        switch(this) {
            // ì£¼ë§
            case SATURDAY : case SUNDAY :
                overtimePay = basePay / 2;
                break;
            // ì£¼ì¤‘
            default:
                overtimePay = minutesWorked <= MINS_PER_SHIFT ? 0 : (minutesWorked - MINS_PER_SHIFT) * payRate / 2;
        }

        return basePay + overtimePay;
    }
}
```

- ìœ„í—˜í•œ ì½”ë“œì´ë‹¤ . íœ´ê°€ë‚˜ ë‹¤ë¥¸ ê¹œë°•í•œ ê²½ìš°ë¥¼ ì¶”ê°€ì•ˆí–ˆì„ ë•Œë¥¼ ëŒ€ë¹„ ëª»í•œë‹¤
- ì´ëŸ° í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ ì „ëµ ì—´ê±° íƒ€ì… íŒ¨í„´ì´ ë‚˜ì˜¨ë‹¤

### ì „ëµ ì—´ê±° íƒ€ì… íŒ¨í„´

```java
enum PayrollDay {
    MONDAY(PayType.WEEKDAY)
    , TUESDAY(PayType.WEEKDAY)
    , WEDNESDAY(PayType.WEEKDAY)
    , THURSDAY(PayType.WEEKDAY)
    , FRIDAY(PayType.WEEKDAY)
    , SATURDAY(PayType.WEEKEND)
    , SUNDAY(PayType.WEEKEND);

    private final PayType payType;

    PayrollDay(PayType payType) {
        this.payType = payType;
    }

    public int pay(int minutesWorked, int payRate) {
        return payType.pay(minutesWorked, payRate);
    }

    // ì „ëµ ì—´ê±° íƒ€ì…
    enum PayType {
        WEEKDAY {
            @Override
            int overtimePay(int minsWorked, int payRate) {
                return minsWorked <= MINS_PER_SHIFT ? 0 : (minsWorked - MINS_PER_SHIFT) * payRate / 2;
            }
        },
        WEEKEND {
            @Override
            int overtimePay(int minsWorked, int payRate) {
                return minsWorked * payRate / 2;
            }
        };

        abstract int overtimePay(int mins, int payRate);
        private static final int MINS_PER_SHIFT = 8 * 60;

        int pay(int minsWorked, int payRate) {
            int basePay = minsWorked * payRate;
            return basePay + overtimePay(minsWorked, payRate);
        }
    }
}
```

### ì •ë¦¬

- í•„ìš”í•œ ì›ì†Œë¥¼ ì»´íŒŒì¼íƒ€ì„ì— ë‹¤ ì•Œ ìˆ˜ ìˆëŠ” ìƒìˆ˜ ì§‘í•©ì´ë¼ë©´ ì—´ê±° íƒ€ì…ì„ ì‚¬ìš©í•˜ì.
    - ex) íƒœì–‘ê³„ í–‰ì„±, í•œ ì£¼ì˜ ìš”ì¼, ì²´ìŠ¤ ë§
    - ex) ë©”ë‰´ ì•„ì´í…œ, ì—°ì‚° ì½”ë“œ, ëª…ë ¹ì¤„ í”Œë˜ê·¸
- ëŒ€ë‹¤ìˆ˜ ì—´ê±° íƒ€ì…ì€ ëª…ì‹œì  ìƒì„±ìë‚˜ ë©”ì„œë“œ ì—†ì´ ì“°ì´ì§€ë§Œ, ê° ìƒìˆ˜ë¥¼ íŠ¹ì • ë°ì´í„°ì™€ ì—°ê²°ì§“ê±°ë‚˜ ìƒìˆ˜ë§ˆë‹¤ ë‹¤ë¥´ê²Œ ë™ì‘í•  ë•ŒëŠ” í•„ìš”í•˜ë‹¤.
    - ì´ ê²½ìš°, ë³´í†µì€ ì¶”ìƒ ë©”ì„œë“œë¥¼ ì„ ì–¸í•œ ë’¤,Â `switch`ë¬¸ ëŒ€ì‹  ìƒìˆ˜ë³„ ë©”ì„œë“œ êµ¬í˜„ì´ ë‚«ë‹¤.
    - ì—´ê±° íƒ€ì… ìƒìˆ˜ê°€ ê°™ì€ ì½”ë“œë¥¼ ê³µìœ í•œë‹¤ë©´, ì „ëµ ì—´ê±° íƒ€ì… íŒ¨í„´ì„ ì‚¬ìš©í•˜ì.

> Item 35 Ordinal ë©”ì„œë“œ ëŒ€ì‹  ì¸ìŠ¤í„´ìŠ¤ í•„ë“œë¥¼ ì‚¬ìš©í•˜ë¼
>

ëª¨ë“  ì—´ê±°íƒ€ì…ì€ í•´ë‹¹ ìƒìˆ˜ê°€ ê·¸ ì—´ê±°íƒ€ì…ì—ì„œ ëª‡ë²ˆì§¸ ìœ„ì¹˜ì¸ì§€ë¥¼ ë°˜í™˜í•˜ëŠ” ordinalì´ë¼ëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤

```java
enum Ensemble {
    SOLO, DUET, TRIO, QUARTET, QUINTET,
    SEXTET, SEPTET, OCTET, NONET, DECTET;

    public int numberOfMusicians() {
        return ordinal() + 1;
    }
}
```

- ë™ì‘ì€ í•˜ì§€ë§Œ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ë”ì°í•˜ë‹¤
- ìƒìˆ˜ ì„ ì–¸ì„ ë°”ê¾¸ëŠ” ìˆœê°„ numberOfMusiciansê°€ ì˜¤ë™ì‘í•œë‹¤

í•´ê²°ì±…ì€? ì—´ê±° íƒ€ì… ìƒìˆ˜ì— ì—°ê²°ëœ ê°’ì€ ordinal ë©”ì„œë“œë¡œ ì–»ì§€ ë§ê³  ì¸ìŠ¤í„´ìŠ¤ í•„ë“œì— ì €ì¥í•˜ì

```java
enum Ensemble {
    SOLO(1)
    , DUET(2)
    , TRIO(3)
    , QUARTET(4)
    , QUINTET(5)
    , SEXTET(6)
    , SEPTET(7)
    , OCTET(8)
    , NONET(9)
    , DECTET(10);

    private final int numberOfMusicians;

    Ensemble(int numberOfMusicians) {
        this.numberOfMusicians = numberOfMusicians;
    }

    public int numberOfMusicians() {
        return numberOfMusicians;
    }
}
```

ëŒ€ë¶€ë¶„ í”„ë¡œê·¸ë˜ë¨¸ëŠ” ì´ ë©”ì„œë“œ(ordinal())ì„ ì“¸ ì¼ì´ ì—†ë‹¤. ì´ ë©”ì„œë“œëŠ” EnumSetê³¼ EnumMapê°™ì´ ì—´ê±° íƒ€ì… ê¸°ë°˜ì˜ ë²”ìš© ìë£Œêµ¬ì¡°ì— ì“¸ ëª©ì ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆë‹¤

> Item 34 ë¹„íŠ¸ í•„ë“œ ëŒ€ì‹  EnumSetì„ ì‚¬ìš©í•˜ë¼
>

ë¹„íŠ¸ í•„ë“œ ì—´ê±° ìƒìˆ˜ ì½”ë“œì˜ ì¥ì 

1. ì—¬ëŸ¬ ìƒìˆ˜ë¥¼ í•˜ë‚˜ì˜ ì§‘í•©ìœ¼ë¡œ ëª¨ì„ ìˆ˜ ìˆëŠ” ì¥ì 
2. í•©ì§‘í•© êµì§‘í•© ë“±ì˜ ì—°ì‚°ì— ìœ ë¦¬í•˜ë‹¤

ë¹„íŠ¸ í•„ë“œ ì—´ê±° ìƒìˆ˜ ì½”ë“œì˜ ë‹¨ì 

1. ì •ìˆ˜ ì—´ê±° ìƒìˆ˜ì˜ ë‹¨ì ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ê°„ë‹¤
2. ëª¨ë“  ì›ì†Œë¥¼ ìˆœíšŒí•˜ê¸° ì‰½ì§€ ì•Šë‹¤

### EnumSetìœ¼ë¡œ ë¹„íŠ¸ í•„ë“œ ëŒ€ì²´í•´ë³´ê¸°



```java
enum Style { BOLD, ITALIC, UNDERLINE, STRIKETHROUGH }

public void applyStyles(Set<Style> styles) {
    StringJoiner sj = new StringJoiner(", ");

    for (Style style : styles) {
        sj.add(style.name());
    }

    System.out.println("applied styles = " + sj);
}
```

- ì›ì†Œê°€ ì´ 64ê°œ ì´í•˜ë¼ë©´RegularEnumSetì„ ì‚¬ìš©í•˜ì—¬ ë¹„íŠ¸í•„ë“œë§Œí¼ì˜ ì„±ëŠ¥ì„ ë‚´ì¤€ë‹¤.
    - ê·¸ ì´ìƒì€JumboEnumSetì„ ì‚¬ìš©í•˜ë„ë¡ ë‚´ë¶€ì ìœ¼ë¡œ íŒë‹¨í•´ì„œ, í¬ê¸°ì—ë„ ìœ ì—°í•˜ë‹¤
- ì›ì†Œë¥¼ ìˆœíšŒí•˜ê¸°ë„ ì‰½ë‹¤.

> Item 37 Ordinal ì¸ë±ì‹± ëŒ€ì‹  EnumMapì„ ì‚¬ìš©í•˜ë¼
>

### Ordinalì„ ë°°ì—´ ì¸ë±ìŠ¤ë¡œ ì´ìš©í•œ ì˜ˆì œ- ì•ˆì¢‹ì€ ë°©ë²•

```java
static class Plant {
    enum LifeCycle { ANNUAL, PERENNIAL, BIENNIAL }

    final String name;
    final LifeCycle lifeCycle;

    Plant(String name, LifeCycle lifeCycle) {
        this.name = name;
        this.lifeCycle = lifeCycle;
    }

    @Override
    public String toString() {
        return "Plant{" +
                "name='" + name + '\'' +
                ", lifeCycle=" + lifeCycle +
                '}';
    }
}
@Test
public void plantsByLifeCycleTest() {
    Set<Plant>[] plantsByLifeCycle = (Set<Plant>[]) new Set[Plant.LifeCycle.values().length];

    List<Plant> garden = new ArrayList<>(List.of(
            new Plant("A", Plant.LifeCycle.ANNUAL),
            new Plant("B", Plant.LifeCycle.PERENNIAL),
            new Plant("C", Plant.LifeCycle.BIENNIAL),
            new Plant("D", Plant.LifeCycle.ANNUAL)
    ));

    for (int i = 0; i < plantsByLifeCycle.length; i++) {
        plantsByLifeCycle[i] = new HashSet<>();
    }

    for (Plant plant : garden) {
        plantsByLifeCycle[plant.lifeCycle.ordinal()].add(plant);
    }

    for (int i = 0; i < plantsByLifeCycle.length; i++) {
        System.out.printf("%s: %s%n", Plant.LifeCycle.values()[i], plantsByLifeCycle[i]);
    }
}
```

- Ordinal()ì„ í†µí•´ ì¸ë±ìŠ¤ë¥¼ ì§šê³  ìˆë‹¤
- ë‹¨ì 
    - Setí´ë˜ìŠ¤ëŠ” ì œë„¤ë¦­ íƒ€ì…ì„ ë°›ëŠ”ë°, ì œë„¤ë¦­ íƒ€ì…ì€ ë°°ì—´ê³¼ í˜¸í™˜ì„±ì´ ì¢‹ì§€ ì•Šë‹¤. ê·¸ë˜ì„œ ë¹„ê²€ì‚¬ í˜•ë³€í™˜ì„ ìˆ˜í–‰í•´ì•¼ í•˜ê³  ê¹”ë”íˆ ì»´íŒŒì¼ë˜ì§€ ì•ŠëŠ”ë‹¤
    - ì •í™•í•œ ì •ìˆ˜ê°’ì„ ì‚¬ìš©í•˜ëŠ”ì§€ ìŠ¤ìŠ¤ë¡œ ë³´ì¦í•´ì•¼í•œë‹¤ ì—´ê±° íƒ€ì…ë§Œí¼ ëª…í™•í•˜ì§€ ì•Šë‹¤

### EnumMapì„ ì‚¬ìš©í•´ ë°ì´í„°ì™€ ì—´ê±° íƒ€ì…ì„ ë§¤í•‘

```java
@Test
public void plantEnumMapTest() {
    List<Plant> garden = new ArrayList<>(List.of(
            new Plant("A", Plant.LifeCycle.ANNUAL),
            new Plant("B", Plant.LifeCycle.PERENNIAL),
            new Plant("C", Plant.LifeCycle.BIENNIAL),
            new Plant("D", Plant.LifeCycle.ANNUAL)
    ));

    Map<Plant.LifeCycle, Set<Plant>> plantsByLifeCycle = new EnumMap<>(Plant.LifeCycle.class);

    for (Plant.LifeCycle lifeCycle : Plant.LifeCycle.values()) {
        plantsByLifeCycle.put(lifeCycle, new HashSet<>());
    }

    for (Plant plant : garden) {
        plantsByLifeCycle.get(plant.lifeCycle).add(plant);
    }

    System.out.println("plantsByLifeCycle = " + plantsByLifeCycle);
}
```

### ëŒë‹¤ë¡œ ì½”ë“œ ì¤„ì—¬ë³´ê¸°

```java
@Test
public void plantEnumMapTestWithLambda() {
    List<Plant> garden = new ArrayList<>(List.of(
            new Plant("A", Plant.LifeCycle.ANNUAL),
            new Plant("B", Plant.LifeCycle.PERENNIAL),
            new Plant("C", Plant.LifeCycle.BIENNIAL),
            new Plant("D", Plant.LifeCycle.ANNUAL)
    ));

    EnumMap<Plant.LifeCycle, Set<Plant>> lifeCycleSetEnumMap =
            garden.stream().collect(
                    groupingBy(
                            p -> p.lifeCycle,
                            () -> new EnumMap<>(Plant.LifeCycle.class),
                            toSet()
                    )
            );

    System.out.println("lifeCycleSetEnumMap = " + lifeCycleSetEnumMap);
}
```

- ëŒë‹¤ì‹ìœ¼ë¡œ í•˜ë©´ ê°’ì´ ìˆëŠ” ê²ƒì— í•´ë‹¹í•˜ëŠ” ì¤‘ì²© ë§µì„ ë§Œë“ ë‹¤

### 2ì°¨ì› ë°°ì—´ì— ordinal ì´ìš©-ì•ˆì¢‹ì€ ë°©ë²•

```java
enum Phase {
    SOLID, LIQUID, GAS;

    enum Transition {
        MELT, FREEZE, BOIL, CONDENSE, SUBLIME, DEPOSIT;

        private static final Transition[][] TRANSITIONS = {
                {null, MELT, SUBLIME}, // SOLID
                {FREEZE, null, BOIL}, // LIQUID
                {DEPOSIT, CONDENSE, null} // GAS
        };

        public static Transition from(Phase from, Phase to) {
            return TRANSITIONS[from.ordinal()][to.ordinal()];
        }
    }
}
```

- PhaseëŠ” ê°ê° ë‹¤ë¥¸ ìƒíƒœë¡œ ë³€í™”í•  ìˆ˜ ìˆëŠ” ì—´ê±° í˜•íƒœì´ë‹¤
- SOLID â†’ LIQUID = MELTê°€ ë˜ëŠ” ì‹
- ordinalì€ ë°°ì—´ ì¸ë±ìŠ¤ì˜ ê´€ê³„ë¥¼ ëª°ë¼ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê°€ëŠ¥ì„± ë†’ì•„ì§„ë‹¤

### EnumMapì„ ì´ìš©í•˜ì—¬ 2ì°¨ì› ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¡œ ì´ìš”í•œ ì˜ˆì œ

```java
public enum Phase {
    SOLID, LIQUID, GAS, PLASMA;

    public enum Transition {
        MELT(SOLID, LIQUID),
        FREEZE(LIQUID, SOLID),
        BOIL(LIQUID, GAS),
        CONDENSE(GAS, LIQUID),
        SUBLIME(SOLID, GAS),
        DEPOSIT(GAS, SOLID),
        IONIZE(GAS, PLASMA),
        DEIONIZE(PLASMA, GAS);

        private final Phase from;
        private final Phase to;

        Transition(Phase from, Phase to) {
            this.from = from;
            this.to = to;
        }

        private final static Map<Phase, Map<Phase, Transition>> map =
                Stream.of(values()).collect(groupingBy(
                        t -> t.from,
                        () -> new EnumMap<>(Phase.class),
                        toMap(t -> t.to, t -> t,
                                (x, y) -> y,
                                () -> new EnumMap<>(Phase.class)
                        )
                ));

        public static Transition from(Phase from, Phase to) {
            return map.get(from).get(to);
        }
    }
}

```

- ì²«ë²ˆì§¸ ìˆ˜ì§‘ê¸°ì¸ groupingByì—ì„œëŠ” ì „ì´ë¥¼ ì´ì „ ìƒíƒœë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¬¶ê³ 
- ë‘ë²ˆì§¸ ìˆ˜ì§‘ê¸°ì¸ toMapì—ì„œëŠ” ì´í›„ ìƒíƒœë¥¼ ì „ì´ì— ëŒ€ì‘ì‹œí‚¤ëŠ” EnumMapì„ ìƒì„±
- EnumMapì„ ì‚¬ìš©í•˜ë©´ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ë‹¤

### í•µì‹¬ ì •ë¦¬

- ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ ìœ„í•´ ordinalì‚¬ìš©í•˜ì§€ ë§ê³  EnumMapì„ ì‚¬ìš©í•˜ì
- ë‹¤ì°¨ì› ê´€ê³„ëŠ” EnumMap<..., EnumMap<...>>ë¡œ í‘œê¸°í•˜ì

> Item 38 í™•ì¥í•  ìˆ˜ ìˆëŠ” ì—´ê±° íƒ€ì…ì´ í•„ìš”í•˜ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¼
>
- ì—´ê±° íƒ€ì…ì˜ í™•ì¥ì´ ì§€ì›ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤
    - í•˜ì§€ë§Œ ê°€ë” í•„ìš” ì‹œ, ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ í™•ì¥í•˜ë©´ ëœë‹¤

```java
public interface Operation {
    double apply(double x, double y);
}

public enum BasicOperation implements Operation {
    PLUS("+") {
        @Override
        public double apply(double x, double y) {
            return x+y;
        }
    },
    MINUS("-") {
        @Override
        public double apply(double x, double y) {
            return x-y;
        }
    },
    TIMES("*") {
        @Override
        public double apply(double x, double y) {
            return x*y;
        }
    },
    DIVIDE("/") {
        @Override
        public double apply(double x, double y) {
            return x/y;
        }
    };

    private final String symbol;

    BasicOperation(String symbol) {
        this.symbol = symbol;
    }

    @Override
    public String toString() {
        return symbol;
    }
}

public enum ExtendedOperation implements Operation {
    EXP("^") {
        @Override
        public double apply(double x, double y) {
            return Math.pow(x, y);
        }
    },
    REMAINDER("%") {
        @Override
        public double apply(double x, double y) {
            return x % y;
        }
    };

    private final String symbol;

    ExtendedOperation(String symbol) {
        this.symbol = symbol;
    }

    @Override
    public String toString() {
        return symbol;
    }
}
```

### í´ë˜ìŠ¤ë¡œ ë°›ì•„ë³´ê¸°

```java
@Test
public void operationTest() {
    double x = 4.0;
    double y = 2.0;
    getEnumClass(BasicOperation.class, x, y);
    getEnumClass(ExtendedOperation.class, x, y);
}

private <T extends Enum<T> & Operation> void getEnumClass(Class<T> enumClass, double x, double y) {
    for (Operation operation : enumClass.getEnumConstants()) {
        System.out.printf("%f %s %f = %f%n", x, operation, y, operation.apply(x, y));
}
```

- enumíƒ€ì…ì˜ í´ë˜ìŠ¤ë¥¼ ë°›ì•„ getEnumConstants()ë¥¼ í†µí•´ í´ë˜ìŠ¤ê°€ ê°€ì§„ applyë©”ì„œë“œë¥¼ ì‹¤í–‰í•´ë³´ì•˜ë‹¤
- <T extends Enum<T? & Operation>ì˜ ì˜ë¯¸ëŠ” enumì´ë©° Operationì„ ìƒì†ë°›ì•˜ë‹¤ëŠ” ê²ƒì„ ì´ì•¼ê¸°í•œë‹¤

### ì»¬ë ‰ì…˜ìœ¼ë¡œ ë°›ì•„ë³´ê¸°

```java
@Test
public void operationTest() {
    double x = 4.0;
    double y = 2.0;

    getEnumCollection(Arrays.asList(BasicOperation.values()), x, y);
    getEnumCollection(Arrays.asList(ExtendedOperation.values()), x, y);
}

private void getEnumCollection(Collection<? extends Operation> opSet, double x, double y) {
    for (Operation operation : opSet) {
        System.out.printf("%f %s %f = %f%n", x, operation, y, operation.apply(x, y));
    }
}
```

- enumíƒ€ì…ì˜ ê°’ì´ ë“¤ì–´ìˆëŠ” listë¥¼ ë„˜ê²¨ë³¸ í˜•íƒœì´ë‹¤
- íŠ¹ì • ì—°ì‚°ì—ì„œëŠ” EnumSetê³¼ EnumMapì„ ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤

# ìŠ¤í„°ë”” ì§ˆë¬¸ ì™œ ì‚¬ìš© ëª»í•˜ëŠ”ì§€ ì–˜ê¸°í•´ë³´ì

> item 39 ëª…ëª… íŒ¨í„´ë³´ë‹¤ëŠ” ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë¼
>

ëª…ëª…íŒ¨í„´ì´ë€?

- ë©”ì„œë“œì˜ ì´ë¦„ì•ì„ testâ€¦ë¡œ ì§“ëŠ” ë“± ì´ë¦„ì— íŒ©í„´ì„ ì£¼ì–´ Reflectionë“±ìœ¼ë¡œ íŒ¨í„´ ê²€ì¶œì‹œ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì‹ì˜ ì½”ë”© í˜•ì‹

ë‹¨ì 

- ì˜¤íƒˆìì˜ ìœ„í—˜
- ë©”ì„œë“œ, íŒŒë¼ë¯¸í„°, í´ë˜ìŠ¤ëª…ì— ëŒ€í•œ ì„¤ì •ì´ ë¶ˆê°€ëŠ¥
- í”„ë¡œê·¸ë¨ ìš”ì†Œë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•  ë§ˆë•…í•  ë°©ë²•ì´ ì—†ë‹¤

### ìƒ˜í”Œ 1: ì¼ë°˜ ë©”ì„œë“œ ì• ë„ˆí…Œì´ì…˜

```java
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface MethodTest {
}
```

- @Retentionê³¼@Targetì€ ë©”íƒ€ ì• ë„ˆí…Œì´ì…˜ì´ë¼ ë¶ˆë¦°ë‹¤.
- @Retentionì€ ìƒì¡´ê¸°ê°„ì„ ë‚˜íƒ€ë‚¸ë‹¤
    - RetentionPolicy.RUNTIME:ëŸ°íƒ€ì„ì—ë„ ìœ ì§€ë˜ì–´ì•¼ í•œë‹¤ëŠ” í‘œì‹œ
- @Target(ElementType.METHOD):í•´ë‹¹ ì• ë„ˆí…Œì´ì…˜ì´ ë°˜ë“œì‹œ ë©”ì„œë“œì— ì ìš©ë˜ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì¤€ë‹¤
- @MethodTest: ì• ë„ˆí…Œì´ì…˜ê³¼ ê°™ì´ ì•„ë¬´ ë§¤ê°œ ë³€ìˆ˜ ì—†ì´ ë‹¨ìˆœíˆ ëŒ€ìƒì— ë§ˆí‚¹í•œë‹¤ëŠ” ëœ»ìœ¼ë¡œ ë§ˆí‚¹ ì• ë„ˆí…Œì´ì…˜ì´ë¼ í•œë‹¤.

```java
public class Sample {
    @MethodTest
    public static void m1() { }
    public static void m2() { }

    @MethodTest
    public static void m3() {
        throw new RuntimeException("ì‹¤íŒ¨");
    }
    public static void m4() { }

    @MethodTest
    public void m5() { } // ì˜ëª» ì‚¬ìš©í•œ ì˜ˆ: ì •ì  ë©”ì„œë“œê°€ ì•„ë‹ˆë‹¤.
    public static void m6() { }
    @MethodTest
    public static void m7() {
        throw new RuntimeException("ì‹¤íŒ¨");
    }
    public static void m8() { }
}
```

### ì˜ˆì œ ìƒ˜í”Œ 2: íŠ¹ì • ì˜ˆì™¸ë¥¼ ë˜ì ¸ì•¼ë§Œ ì„±ê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸

```java
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface ExceptionSingleTest {
    Class<? extends Throwable> value();
}
```

- ValueëŠ” ê¸°ë³¸ íŒŒë¼ë¯¸í„° ê°’ì„ ì˜ë¯¸
    - Target ì• ë„ˆí…Œì´ì…˜ì˜ ê²½ìš° ê¸°ë³¸ íŒŒë¼ë¯¸í„° ê°’ìœ¼ë¡œ ElementTypeì„ ë°›ëŠ”ë‹¤ê³  ë³´ë©´ ëœë‹¤
    - ì—¬ê¸°ì„œëŠ” Throwableì„ ìƒì†í•˜ëŠ” ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ë°›ê¸° ë•Œë¬¸ì— ëª¨ë“  ì˜ˆì™¸ í¬ìš© ê°€ëŠ¥

```java
public class Sample2 {
    @ExceptionSingleTest(ArithmeticException.class)
    public static void m1() {
        int i = 0; // ì„±ê³µ
        i = i / i;
    }

    @ExceptionSingleTest(ArithmeticException.class)
    public static void m2() {
        int[] a = new int[0]; // ì‹¤íŒ¨, ë‹¤ë¥¸ ì˜ˆì™¸ ë°œìƒ
        int i = a[1];
    }

    @ExceptionSingleTest(ArithmeticException.class)
    public static void m3() { } // ì‹¤íŒ¨, ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ
}
```

```java
@Test
public void sample2ClassAnnotationTest() throws ClassNotFoundException {
    int tests = 0;
    int passed = 0;
    Class<?> testClass = Class.forName("item39.Sample2");
    Method[] declaredMethods = testClass.getDeclaredMethods();

    for (Method m : declaredMethods) {
        if(m.isAnnotationPresent(ExceptionSingleTest.class)) {
            tests++;
            try {
                m.invoke(null);
                System.out.println(m + ", í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ (ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•ŠìŒ)");
            } catch (InvocationTargetException wrappedExc) {
                Throwable exc = wrappedExc.getCause();
                Class<? extends Throwable> excType = m.getAnnotation(ExceptionSingleTest.class).value(); // ì• ë„ˆí…Œì´ì…˜ ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì„ ì¶”ì¶œí•œë‹¤.

                if(excType.isInstance(exc)) {
                    System.out.printf("í…ŒìŠ¤íŠ¸ %s ì„±ê³µ: ê¸°ëŒ€í•œ ì˜ˆì™¸ %s, ë°œìƒí•œ ì˜ˆì™¸ %s%n", m, excType.getName(), exc);
                    passed++;
                } else {
                    System.out.printf("í…ŒìŠ¤íŠ¸ %s ì‹¤íŒ¨: ê¸°ëŒ€í•œ ì˜ˆì™¸ %s, ë°œìƒí•œ ì˜ˆì™¸ %s%n", m, excType.getName(), exc);
                }
            } catch (Exception exc) {
                System.out.println("ì˜ëª» ì‚¬ìš©í•œ @ExceptionTest: " + m);
            }
        }
    }

    System.out.printf("ì„±ê³µ: %d, ì‹¤íŒ¨: %d%n", passed, tests - passed);
}
```

- Sample2 í´ë˜ìŠ¤ì— ì„ ì–¸ëœ ë©”ì„œë“œ ì¤‘@ExceptionSingleTest ì• ë„ˆí…Œì´ì…˜ì´ ë‹¬ë¦° ê²ƒì„ ì°¾ëŠ”ë‹¤.
- InvocationTargetExceptionì˜ í•˜ìœ„ ì˜ˆì™¸ê°€ ì¼ì–´ë‚˜ê³ , ê·¸ ì˜ˆì™¸ê°€@ExceptionSingleTest ì• ë„ˆí…Œì´ì…˜ì˜ ì¸ìˆ˜ë¡œì„œ ë“¤ì–´ì˜¨ ì˜ˆì™¸ì™€ ì¼ì¹˜í•´ì•¼ë§Œpassedì˜ ì¹´ìš´íŠ¸ê°€ ì˜¬ë¼ê°„ë‹¤.
    - InvocationTargetExceptionì€ ë¦¬í”Œë ‰ì…˜ APIì˜ í†µí•© ì˜ˆì™¸ë¡œ.getCause() ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì‹¤ì œ ì˜ˆì™¸ê°€ ë¬´ì—‡ì¸ì§€ ì•Œ ìˆ˜ ìˆë‹¤.

### ìƒ˜í”Œ 3: ìƒ˜í”Œ2ì™€ ë™ì¼í•œë° ë°°ì—´ë¡œ ë°›ëŠ” ì• ë„ˆí…Œì´ì…˜

```java
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface ExceptionArrayTest {
    Class<? extends Throwable>[] value();
}
```

- ë‹¨ í•˜ë‚˜ì˜ ì• ë„ˆí…Œì´ì…˜ì„ ë°›ë”ë¼ë„ ì•„ë¬´ëŸ° ì—ëŸ¬ê°€ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤
    - ex)@ExceptionArrayTest(IndexOutOfBoundsException)ì²˜ëŸ¼ ì‘ì„±í•´ë„ ë¬¸ì œì—†ë‹¤.

```java
public class Sample3 {
    @ExceptionArrayTest({
            IndexOutOfBoundsException.class
            , NullPointerException.class
    })
    public static void doublyBad() {
        List<String> list = new ArrayList<>();
        list.add(5, null);
    }
}
```

### ìƒ˜í”Œ 4: @Repeatableì´ìš©í•˜ì—¬ ì—¬ëŸ¬ê°œì˜ ê°’ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ì• ë„ˆí…Œì´ì…˜ ë§Œë“¤ê¸°

```java
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
@Repeatable(ExceptionTestContainer.class)
public @interface ExceptionRepeatableTest {
    Class<? extends Throwable> value();
}
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface ExceptionTestContainer {
    ExceptionRepeatableTest[] value();
}
```

```java
public class Sample4 {
    @ExceptionRepeatableTest(IndexOutOfBoundsException.class)
    @ExceptionRepeatableTest(NullPointerException.class)
    public static void doublyBad() {
        List<String> list = new ArrayList<>();
        list.add(5, null);
    }
}
```

### í•µì‹¬ ì •ë¦¬

- ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” ì¼ì„ êµ³ì´ ëª…ëª… íŒ¨í„´ìœ¼ë¡œ ì²˜ë¦¬í•˜ì§€ ë§ì
- ìë°” í”„ë¡œê·¸ë˜ë¨¸ë¼ë©´ ì–´ë…¸í…Œì´ì…˜ íƒ€ì…ë“¤ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤

> item 40 Override ì• ë„ˆí…Œì´ì…˜ì„ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•˜ë¼
>

í•´ë‹¹ ì• ë„ˆí…Œì´ì…˜ì„ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•œë‹¤ë©´ ì—¬ëŸ¬ê°€ì§€ ë²„ê·¸ë“¤ì„ ì˜ˆë°©í•´ì¤€ë‹¤

â–¶ï¸ ì˜ì–´ ì•ŒíŒŒë²³ 2ê°œë¡œ êµ¬ì„±ëœ ë¬¸ìì—´(ë°”ì´ê·¸ë¨)ì„ í‘œí˜„í•˜ëŠ” í´ë˜ìŠ¤

```java
public class Bigram {
    private final char first;
    private final char second;

    public Bigram(char first, char second) {
        this.first  = first;
        this.second = second;
    }

    public boolean equals(Bigram b) {
        return b.first == first && b.second == second;
    }

    public int hashCode() {
        return 31 * first + second;
    }

    public static void main(String[] args) {
        Set<Bigram> s = new HashSet<>();
        for (int i = 0; i < 10; i++)
            for (char ch = 'a'; ch <= 'z'; ch++)
                s.add(new Bigram(ch, ch));
        System.out.println(s.size());
    }
}
```

â†’ main ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê³  Setì€ ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•Šìœ¼ë‹ˆ 26ì´ ì¶œë ¥ ë  ê²ƒ ê°™ì§€ë§Œ, ì‹¤ì œë¡œëŠ” 260ì´ ì¶œë ¥ëœë‹¤.

ë¬¸ì œì˜ ì›ì¸: equals ë©”ì†Œë“œë¥¼ ì¬ì •ì˜í•œê²Œ ì•„ë‹ˆë¼ ë‹¤ì¤‘ì •ì˜í•´ë²„ë¦° ê²ƒì´ë‹¤. Objectì˜Â `equals()`Â ë¥¼ ì¬ì •ì˜í•˜ë ¤ë©´ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì„ Objectë¡œ í•´ì•¼ í•˜ëŠ”ë° ê·¸ë ‡ì§€ ì•Šì•„ì„œ ìƒì†ì´ ì•„ë‹Œ ë³„ê°œì˜ equals ë©”ì„œë“œë¥¼ ì •ì˜í•œ ê¼´ì´ ë˜ì—ˆë‹¤.

ìˆ˜ì •í•˜ë©´

```java
@Override public boolean equals(Object o) {
        if (!(o instanceof Bigram2))
            return false;
        Bigram2 b = (Bigram2) o;
        return b.first == first && b.second == second;
}
```

equalsì— ë¬¸ì œê°€ ìˆìŒì—ë„ ì»´íŒŒì¼ì—ëŠ” ì„±ê³µí•˜ê¸° ë•Œë¬¸ì—,Â `@Override`Â ë¥¼ ë‹¬ì§€ ì•Šê²Œ ë˜ë©´ ìœ„ì˜ ì˜ëª»í•œ ì ì„ ì»´íŒŒì¼ëŸ¬ê°€ ì•Œë ¤ì£¼ì§€ ëª»í•œë‹¤.

## Overrideì˜ ì˜ˆì™¸ì‚¬í•­

êµ¬ì²´ í´ë˜ìŠ¤ì—ì„œ ìƒìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•  ë•ŒëŠ” êµ³ì´ @Overrideë¥¼ ë‹¬ì§€ ì•Šì•„ë„ ëœë‹¤. êµ¬ì²´ í´ë˜ìŠ¤ì¸ë° êµ¬í˜„í•˜ì§€ ì•Šì€ ì¶”ìƒ ë©”ì„œë“œê°€ ë‚¨ì•„ ìˆë‹¤ë©´ ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ì‚¬ì‹¤ì„ ì•Œë ¤ì£¼ê¸° ë–„ë¬¸ì´ë‹¤

- ì¬ì •ì˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•  ë•Œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  ë‹¨, ì¶”ìƒ í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ì—ëŠ” ìƒìœ„ í´ë˜ìŠ¤ë‚˜ ìƒìœ„ ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•˜ëŠ” ëª¨ë“  ë©”ì„œë“œì— @Overrideë¥¼ ë‹¤ëŠ” ê²ƒì´ ì¢‹ë‹¤
- ì˜ˆì»¨ë° Set ì¸í„°í˜ì´ìŠ¤ëŠ” Collectionì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥í–ˆì§€ë§Œ ìƒˆë¡œ ì¶”ê°€í•œ ë©§ë“œëŠ” ì—†ê¸° ë•Œë¬¸ì— ëª¨ë“  ë©”ì„œë“œ ì„ ì–¸ì— @Overrideë¥¼ ë‹¬ì•„ ì‹¤ìˆ˜ë¡œ ì¶”ê°€í•œ ë©”ì„œë“œê°€ ì—†ìŒì„ ë³´ì¥í•œë‹¤

> **í•µì‹¬ ì •ë¦¬:** ì¬ì •ì˜í•œ ëª¨ë“  ë©”ì„œë“œì— @Override ì• ë„ˆí…Œì´ì…˜ì„ ì˜ì‹ì ìœ¼ë¡œ ë‹¬ë©´, ì—¬ëŸ¬ë¶„ì´ ì‹¤ìˆ˜í–ˆì„ë•Œ ì»´íŒŒì¼ëŸ¬ê°€ ë°”ë¡œ ì•Œë ¤ì¤„ ê²ƒì´ë‹¤. ì˜ˆì™¸ëŠ” í•œ ê°€ì§€ ë¿ì´ë‹¤. êµ¬ì²´ í´ë˜ìŠ¤ì—ì„œ ìƒìœ„ í´ë˜ìŠ¤ì˜ ì¶”ìƒ ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•œ ê²½ìš°ì—ëŠ” ì´ ì• ë„ˆí…Œì´ì…˜ì„ ë‹¬ì§€ ì•Šì•„ë„ ëœë‹¤.â€
>

> item 41: ì •ì˜í•˜ë ¤ëŠ” ê²ƒì´ íƒ€ì…ì´ë¼ë©´ ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ë¼
>

ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ë€?:

- ì•„ë¬´ ë©”ì„œë“œë„ ë‹´ê³  ìˆì§€ ì•Šê³  ë‹¨ì§€ ìì‹ ì„ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ê°€ íŠ¹ì • ì†ì„±ì„ ê°€ì§ì„ í‘œì‹œí•´ì£¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ë¯¸í•œë‹¤
- ëŒ€í‘œì ì¸ ì˜ˆë¡œ, Serializable ì¸í„°í˜ì´ìŠ¤ê°€ ìˆë‹¤. ë‹¨ìˆœíˆ ìì‹ ì„ êµ¬í˜„í•œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ObjectOutputStreamì„ í†µí•´ ì§ë ¬í™”í•  ìˆ˜ ìˆë‹¤ê³  ì•Œë ¤ì£¼ëŠ” ì—­í• ì„ í•œë‹¤

ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ì˜ ì¥ì 

- ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ëŠ” ë‘ê°€ì§€ ë©´ì—ì„œ ì• ë„ˆí…Œì´ì…˜ ë³´ë‹¤ ì¥ì ì„ ê°€ì§„ë‹¤
    - ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ëŠ” íƒ€ì…ì´ê¸° ë•Œë¬¸ì— ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í–ˆë‹¤ë©´ ëŸ°íƒ€ì„ì—ì„œë‚˜ ë°œê²¬ë  ì˜¤ë¥˜ë¥¼ ì»´íŒŒì¼ íƒ€ì„ì— ì¡ì„ ìˆ˜ ìˆë‹¤
    - ì ìš© ëŒ€ìƒì„ ë” ì •ë°€í•˜ê²Œ ì§€ì •í•  ìˆ˜ ìˆë‹¤ ê·¸ëƒ¥ ë§ˆí‚¹í•˜ê³  ì‹¶ì€ í´ë˜ìŠ¤ì—ì„œë§Œ ê·¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ ë§ˆí‚¹ëœ íƒ€ì…ì€ ìë™ìœ¼ë¡œ ê·¸ ì¸í„°í˜ì´ìŠ¤ì˜ í•˜ìœ„ íƒ€ì…ì„ì´ ë³´ì¥ëœë‹¤.

ì–´ë–¤ ìƒí™©ì—ì„œ ë§ˆì»¤ ì• ë„ˆí…Œì´ì…˜ê³¼ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¨ì•¼ í• ê¹Œ?

1. í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ ì™¸ì˜ í”„ë¡œê·¸ë¨ ìš”ì†Œ(ëª¨ë“ˆ/íŒ¨í‚¤ì§€/í•„ë“œ/ì§€ì—­ë³€ìˆ˜ ë“±)ì— ë§ˆí‚¹í•´ì•¼ í• ë•ŒëŠ”Â **ì• ë„ˆí…Œì´ì…˜**ì„ ì‚¬ìš©í•œë‹¤.
2. **ë§ˆí‚¹ì´ ëœ ê°ì²´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ” ë©”ì„œë“œ**ë¥¼ ì‘ì„±í•  ì¼ì´ ìˆë‹¤ë©´ ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ë¥¼ í•´ë‹¹ ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ì»´íŒŒì¼ íƒ€ì„ì— ì˜¤ë¥˜ë¥¼ ì¡ì•„ë‚¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

> ğŸ“š **í•µì‹¬ ì •ë¦¬**
>
>
> ìƒˆë¡œ ì¶”ê°€í•˜ëŠ” ë©”ì„œë“œ ì—†ì´ ë‹¨ì§€ íƒ€ì… ì •ì˜ê°€ ëª©ì ì´ë¼ë©´ ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•˜ì. í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ ì™¸ì˜ í”„ë¡œê·¸ë¨ ìš”ì†Œì— ë§ˆí‚¹í•´ì•¼ í•˜ê±°ë‚˜, ì• ë„ˆí…Œì´ì…˜ì„ ì ê·¹ í™œìš©í•˜ëŠ” í”„ë ˆì„ì›Œí¬ì˜ ì¼ë¶€ë¡œ ë§ˆì»¤ë¥¼ í¸ì…ì‹œí‚¤ê³ ì í•œë‹¤ë©´ ë§ˆì»¤ ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì.
>

ğŸ’¡ ì¶”ê°€ ë¦¬ì„œì¹˜

```java
public interface Deletable {
}
```

ê°œì²´ë¥¼ ì œê±°í•  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë§ˆì»¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤

ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì—”í‹°í‹°ë¥¼ ì‚­ì œë¥¼ í•˜ë ¤ë©´ ì´ ì—”í‹°í‹°ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´ê°€ Deletable ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤

```java
public class Entity implements Deletable {
    // implementation details
}
```

ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì—”í‹°í‹°ë¥¼ ì œê±°í•˜ëŠ” ë©”ì„œë“œê°€ ìˆëŠ” DAO ê°œì²´ê°€ ìˆë‹¤ê³  ê°€ì •í•˜ë©´ ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ë§Œ ì‚­ì œí•  ìˆ˜ ìˆë„ë¡ delete()ë©”ì„œë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤

```java
public class ShapeDao {

    // other dao methods

    public boolean delete(Object object) {
        if (!(object instanceof Deletable)) {
            return false;
        }

        // delete implementation details
        
        return true;
    }
}
```

ê²°ë¡  :,Â **ìš°ë¦¬ëŠ” ê°ì²´ì˜ ëŸ°íƒ€ì„ ë™ì‘ì— ëŒ€í•œ í‘œì‹œë¥¼ JVMì— ì œê³µí•˜ê³  ìˆë‹¤.**Â  ê°ì²´ê°€ ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚­ì œí•  ìˆ˜ ìˆë‹¤. **ê·¸ë˜ì„œ**Â ì»´íŒŒì¼ íƒ€ì„ì— ì˜¤ë¥˜ë¥¼ ì¡ì„ ìˆ˜ ìˆëŠ” ê±´ê°€ë´„?